== Lightbar Reference

=== Lightbar Numbering

.Lightbar, page 1
[width="100%",cols="1*<,8*^"]
|====================
| Title   | `Sys`  |  `Acs`  |  `Loc`  |  `Tsr`  |  `Cht`  |  `New`  |  `Prt`  |  `U/D`
| Decimal | 00&#160;01 | 02&#160;03 | 04&#160;05 | 06&#160;07 | 08&#160;09 | 10&#160;11 | 12&#160;13 | 14&#160;15
| Hex     | $00&#160;01 | 02&#160;03 | 04&#160;05 | 06&#160;07 | 08&#160;09 | 0a&#160;0b | 0c&#160;0d | 0e&#160;0f
|====================

.Lightbar, page 2
[width="100%",cols="1*<,8*^"]
|====================
| Title   | `Asc`  |  `Ans`  |  `Exp`  |  `Unv`  |  `Trc`  |  `Bel`  |  `Net`  |  `Mac`
| Decimal | 16&#160;17 | 18&#160;19 | 20&#160;21 | 22&#160;23 | 24&#160;25 | 26&#160;27 | 28&#160;29 | 30&#160;31
| Hex     | $10&#160;11 | 12&#160;13 | 14&#160;15 | 16&#160;17 | 18&#160;19 | 1a&#160;1b | 1c&#160;1d | 1e&#160;1f
|====================

.Lightbar, page 3
[width="100%",cols="1*<,8*^"]
|====================
| Title   | `Chk` | `Mor` | `Frd` | `Sub` | `Res` | `Mnt` | `Mnu` | `Xpr`
| Decimal |  32&#160;33 | 34&#160;35 | 36&#160;37 | 38&#160;39 | 40&#160;41 | 42&#160;43 | 44&#160;45 | 46&#160;47
| Hex     | $20&#160;21 | 22&#160;23 | 24&#160;25 | 26&#160;27 | 28&#160;29 | 2a&#160;2b | 2c&#160;2d | 2e&#160;2f
|====================

.Lightbar, page 4
[width="100%",cols="1*<,8*^"]
|====================
| Title   | `Em3`  |  `Sc2`  |  `Scp`  |  `Alt`  |  `Trb`  |  `DCD`  |  `DSR`  |  `$3e`
| Decimal | 48&#160;49 | 50&#160;51 | 52&#160;53 | 54&#160;55 | 56&#160;57 | 58&#160;59 | 60&#160;61 | 62&#160;63
| Hex     |$30&#160;31 | 32&#160;33 | 34&#160;35 | 36&#160;37 | 38&#160;39 | 3a&#160;3b | 3c&#160;3d | 3e&#160;3f
|====================

.Lightbar, page 5
[width="100%",cols="1*<,8*^"]
|====================
| Title   | `$40`  |  `$42`  |  `$44`  |  `$46`  |  `$48`  |  `$4a`  |  `$4c`  |  `$4e`
| Decimal | 64&#160;65 | 66&#160;67 | 68&#160;69 | 70&#160;71 | 72&#160;73 | 74&#160;75 | 76&#160;77 | 78&#160;79
| Hex     |$40&#160;41 | 42&#160;43 | 44&#160;45 | 46&#160;47 | 48&#160;49 | 4a&#160;4b | 4c&#160;4d | 4e&#160;4f
|====================

.Lightbar, page 6
[width="100%",cols="1*<,8*^"]
|====================
|  Title |  `$50`  |  `$52`  |  `$54`  |  `$56`  |  `$58`  |  `$5a`  |  `$5c`  |  `$5e`
|Decimal | 80&#160;81 | 82&#160;83 | 84&#160;85 | 86&#160;87 | 88&#160;89 | 90&#160;91 | 92&#160;93 | 94&#160;95
|    Hex | $50&#160;51 | 52&#160;53 | 54&#160;55 | 56&#160;57 | 58&#160;59 | 5a&#160;5b | 5c&#160;5d | 5e&#160;5f
|====================

.Lightbar, page 7
[width="100%",cols="1*<,8*^"]
|====================
|  Title |  `$60`  |  `$62`  |  `$64`  |  `$66`  |  `$68`  |  `$6a`  |  `$6c`  |  `$6e`
|Decimal | 96&#160;97 | 98&#160;99 | 100&#160;101 | 102&#160;103 | 104&#160;105 | 106&#160;107 | 108&#160;109 | 110&#160;111
|    Hex | $60&#160;61 | 62&#160;63 | 64&#160;65 | 66&#160;67 | 68&#160;69 | 6a&#160;6b | 6c&#160;6d | 6e&#160;6f
|====================

.Lightbar, page 8
[width="100%",cols="1*<,8*^"]
|====================
| Title   | `At1` | `At2` | `At3` | `At4` | `At5` | `At6` | `At7` | `At8`
| Decimal | 112&#160;113 | 114&#160;115 | 116&#160;117 | 118&#160;119 | 120&#160;121 | 122&#160;123 | 124&#160;125 | 126&#160;127
| Hex     | $70&#160;71 | 72&#160;73 | 74&#160;75 | 76&#160;77 | 78&#160;79 | 7a&#160;7b | 7c&#160;7d | 7e&#160;7f
|====================

=== Lightbar Interface: `&,52`

==== BASIC `&,52` Commands [[ampersand-lightbar]]

`&,52,_position_,_mode_`

`position` ranges from 0-127 decimal ($00-$7f hexadecimal--`&,52,$30,0`, for example, is allowed).

`mode` is 0-4 as used by BASIC.

[options="autowidth"]
|====================
| `0` | clear checkmark at _position_
| `1` | set checkmark at _position_
| `2` | toggle checkmark at _position_
| `3` | read checkmark at _position_, return status in `a%`: 0=off, 1=on
| `4` | move "`lit`" portion of lightbar to position 0-55 [#FIXME#: or 1-56?]
|====================

==== Assembly Example

#FIXME#

Mode 5 is reserved for use by ML routines, and is the equivalent of `&,52,_x_,3` in BASIC. `ldx` with the flag to check, `jsr chkflags`, and the result (0 or 1) is returned in `.a`.

.checkflag.asm
[source,6502]
----
ldx #$04	; lightbar flag number
jsr chkflag	; returns flag status (0=off, 1=on) in .a
bne flag_on
beq flag_off
----
