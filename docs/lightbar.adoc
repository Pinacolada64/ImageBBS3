## The Lightbar

Image BBS`'s familiar lightbar has been expanded, as compared to previous versions, in both scope and utility. The first two pages remain virtually unchanged from Image 1.2, but the addition of six new lightbar pages adds the ability to monitor and change new features which have been added to this new version.

### Lightbar Defaults

During boot-up, lightbar check mark defaults are read. This allows you to configure your BBS more easily than in previous versions of Image BBS. Maybe you want to disable the _More_ prompt, or debug some code with the on-screen trace function, at startup. You can do that within `IM`, option `H`: _Lightbar/Alarms_.

### Lightbar Function Keys

The function keys kbd:[f1]-kbd:[f8] are used to switch pages, move the "`lit`" portion of the lightbar, and enable/disable individual lightbar positions, shown in the table below:

.Lightbar Function Keys
[options="autowidth",options="header"]
|====================
| Key      | Purpose
| kbd:[f1] | Toggle split screen mode
| kbd:[f2] | Toggle 2 mHz (`FAST` in BASIC 7.0) mode when using a Commodore 128 in C64 mode
| kbd:[f3] | move highlighted position left
| kbd:[f4] | page backward through lightbar pages
| kbd:[f5] | move highlighted position right
| kbd:[f6] | page forward through lightbar pages
| kbd:[f7] | enable (check) the selected lightbar position
| kbd:[f8] | disable (uncheck) the selected lightbar position
|====================

Split screen mode is useful when you want to access the lightbar and view BBS status/caller information. Full screen mode allows you to read more text on the screen (it doesn't show the information displayed while in split screen mode).

You must be in full screen mode to enable or disable lightbar positions via the function keys.

### Lightbar Functions

NOTE: These are the default lightbar titles. You may change the three-character lightbar labels by editing the file `s.lightdefs`. 

NOTE: The decimal/hexadecimal values of each lightbar position are included as a reference for the <<ampersand-lightbar>>. 

.Lightbar, page 1
[width="100%",cols="1*<,8*^"]
|====================
| Title   | `Sys`  |  `Acs`  |  `Loc`  |  `Tsr`  |  `Cht`  |  `New`  |  `Prt`  |  `U/D`  
| Decimal | 00&nbsp;01 | 02&nbsp;03 | 04&nbsp;05 | 06&nbsp;07 | 08&nbsp;09 | 10&nbsp;11 | 12&nbsp;13 | 14&nbsp;15
| Hex     | $00&nbsp;01 | 02&nbsp;03 | 04&nbsp;05 | 06&nbsp;07 | 08&nbsp;09 | 0a&nbsp;0b | 0c&nbsp;0d | 0e&nbsp;0f
|====================


  Title   Sys  |  Acs  |  Loc  |  Tsr  |  Cht  |  New  |  Prt  |  U/D
Decimal  00 01 | 02 03 | 04 05 | 06 07 | 08 09 | 10 11 | 12 13 | 14 15
    Hex $00 01 | 02 03 | 04 05 | 06 07 | 08 09 | 0a 0b | 0c 0d | 0e 0f

     Sysop Available to Chat    0 Sys 1    Background Page Enable
     Edit User's Access         2 Acs 3    Block 300 Baud Callers
     Local Mode (No Modem IO)   4 Loc 5    ZZ (Pseudo-Local) Mode
     Edit User's Time Left      6 Tsr 7    Prime Time Enabled
     Enter/Exit Chat Mode       8 Cht 9    Disable Modem Input
     Disallow New Users        10 New 11   Enable Screen Blanking
     Print Spooling            12 Prt 13   Print Log Entries
     Disable U/D Section       14 U/D 15   300 Baud U/D Lockout

.Lightbar, page 2
[width="100%",cols="1*<,8*^"]
|====================
| Title   | `Asc`  |  `Ans`  |  `Exp`  |  `Unv`  |  `Trc`  |  `Bel`  |  `Net`  |  `Mac`  
| Decimal | 16&nbsp;17 | 18&nbsp;19 | 20&nbsp;21 | 22&nbsp;23 | 24&nbsp;25 | 26&nbsp;27 | 28&nbsp;29 | 30&nbsp;31
| Hex     | $10&nbsp;11 | 12&nbsp;13 | 14&nbsp;15 | 16&nbsp;17 | 18&nbsp;19 | 1a&nbsp;1b | 1c&nbsp;1d | 1e&nbsp;1f
|====================


  Title   Asc  |  Ans  |  Exp  |  Unv  |  Trc  |  Bel  |  Net  |  Mac
Decimal  16 17 | 18 19 | 20 21 | 22 23 | 24 25 | 26 27 | 28 29 | 30 31
    Hex $10 11 | 12 13 | 14 15 | 16 17 | 18 19 | 1a 1b | 1c 1d | 1e 1f

     ASCII Translation         16 Asc 17   Line Feed After Return
     ANSI Color Enable         18 Ans 19   ANSI Graphics Enable
     Expert Mode Enable        20 Exp 21   Disallow Double Calls
     No Immediate U/D Credits  22 Unv 23   Allow Auto-Logoff
     On-Screen Trace Enable    24 Trc 25   Undefined
     Local Bells Enable        26 Bel 27   Local Beeps Disable
     NetMail Enable            28 Net 29   NetMail Trigger
     Macros On/Off             30 Mac 31   MCI Disable in Editor

.Lightbar, page 3
[width="100%",cols="1*<,8*^"]
|====================
| Title   | `Chk` | `Mor` | `Frd` | `Sub` | `Res` | `Mnt` | `Mnu` | `Xpr`  
| Decimal |  32&nbsp;33 | 34&nbsp;35 | 36&nbsp;37 | 38&nbsp;39 | 40&nbsp;41 | 42&nbsp;43 | 44&nbsp;45 | 46&nbsp;47
| Hex     | $20&nbsp;21 | 22&nbsp;23 | 24&nbsp;25 | 26&nbsp;27 | 28&nbsp;29 | 2a&nbsp;2b | 2c&nbsp;2d | 2e&nbsp;2f 
|====================


  Title   Chk  |  Mor  |  Frd  |  Sub  |  Res  |  Mnt  |  Mnu  |  Xpr
Decimal  32 33 | 34 35 | 36 37 | 38 39 | 40 41 | 42 43 | 44 45 | 46 47
    Hex $20 21 | 22 23 | 24 25 | 26 27 | 28 29 | 2a 2b | 2c 2d | 2e 2f

 Enable MailCheck at Logon     32 Chk 33   Excessive Chat Logoff
 More Prompt On                34 Mor 35   More Prompt Not Available
 Full-Color Read Disable       36 Frd 37   Undefined
 Message Bases Closed (SB)     38 Sub 39   Files Section Closed (GF)
 System Reserved (Default PW)  40 Res 41   Network Reserve
 Undefined                     42 Mnt 43   Modem Answer Disabled
 Is User in Menu Mode?         44 Mnu 45   Are Menus Available on BBS?
 Enable Express Logon          46 Xpr 47   Use s.detect Files

.Lightbar, page 4
[width="100%",cols="1*<,8*^"]
|====================
| Title   | `Em3`  |  `Sc2`  |  `Scp`  |  `Alt`  |  `$38`  |  `$3a`  |  `$3c`  |  `$3e`  
| Decimal | 48&nbsp;49 | 50&nbsp;51 | 52&nbsp;53 | 54&nbsp;55 | 56&nbsp;57 | 58&nbsp;59 | 60&nbsp;61 | 62&nbsp;63
| Hex     |$30&nbsp;31 | 32&nbsp;33 | 34&nbsp;35 | 36&nbsp;37 | 38&nbsp;39 | 3a&nbsp;3b | 3c&nbsp;3d | 3e&nbsp;3f
|====================


  Title   Em3  |  Sc2  |  Scp  |  Alt  |  $38  |  $3a  |  $3c  |  $3e
Decimal  48 49 | 50 51 | 52 53 | 54 55 | 56 57 | 58 59 | 60 61 | 62 63
    Hex $30 31 | 32 33 | 34 35 | 36 37 | 38 39 | 3a 3b | 3c 3d | 3e 3f

 Emulate Image 1.2/1.3 mode    48 Em3 49   Undefined
 Disable 2nd Security Check    50 Sc2 51   Undefined
 SuperCPU Present              52 Scp 53   Turbo Mode On
 Alt last 10 callers display   54 Alt 55   Undefined
 Disable Troubleshooting Mode  56 $38 57   Undefined

.Lightbar, page 5
[width="100%",cols="1*<,8*^"]
|====================
| Title   | `$40`  |  `$42`  |  `$44`  |  `$46`  |  `$48`  |  `$4a`  |  `$4c`  |  `$4e`  
| Decimal | 64&nbsp;65 | 66&nbsp;67 | 68&nbsp;69 | 70&nbsp;71 | 72&nbsp;73 | 74&nbsp;75 | 76&nbsp;77 | 78&nbsp;79
| Hex     |$40&nbsp;41 | 42&nbsp;43 | 44&nbsp;45 | 46&nbsp;47 | 48&nbsp;49 | 4a&nbsp;4b | 4c&nbsp;4d | 4e&nbsp;4f
|====================

.Lightbar, page 6
[width="100%",cols="1*<,8*^"]
|====================
|  Title |  `$50`  |  `$52`  |  `$54`  |  `$56`  |  `$58`  |  `$5a`  |  `$5c`  |  `$5e` 
|Decimal | 80&nbsp;81 | 82&nbsp;83 | 84&nbsp;85 | 86&nbsp;87 | 88&nbsp;89 | 90&nbsp;91 | 92&nbsp;93 | 94&nbsp;95
|    Hex | $50&nbsp;51 | 52&nbsp;53 | 54&nbsp;55 | 56&nbsp;57 | 58&nbsp;59 | 5a&nbsp;5b | 5c&nbsp;5d | 5e&nbsp;5f
|====================

.Lightbar, page 7
[width="100%",cols="1*<,8*^"]
|====================
| Title   | `At1` | `At2` | `At3` | `At4` | `At5` | `At6` | `At7` | `At8` 
| Decimal | 96&nbsp;97 | 98&nbsp;99 | 100&nbsp;101 | 102&nbsp;103 | 104&nbsp;105 | 106&nbsp;107 | 108&nbsp;109 | 110&nbsp;111 
| Hex     | $60&nbsp;61 | 62&nbsp;63 | $64&nbsp;$65 | $66&nbsp;$67 | $68&nbsp;$69 | $6a&nbsp;$6b | $6c&nbsp;$6d | $6e&nbsp;$6f 
|====================

  Title   At1  |  At2  |   At3   |   At4   |   At5   |   At6   |   At7   |   At8
Decimal  96 97 | 98 99 | 100 101 | 102 103 | 104 105 | 106 107 | 108 109 | 110 111
    Hex $60 61 | 62 63 | $64 $65 | $66 $67 | $68 $69 | $6a $6b | $6c $6d | $6e $6f

        Default Alarm 1 Enable    96 At1 97   Default Alarm 1 Trigger
        Default Alarm 2 Enable    98 At2 99   Default Alarm 2 Trigger
        Default Alarm 3 Enable   100 At3 101  Default Alarm 3 Trigger
        Default Alarm 4 Enable   102 At4 103  Default Alarm 4 Trigger
        Default Alarm 5 Enable   104 At5 105  Default Alarm 5 Trigger
        Default Alarm 6 Enable   106 At6 107  Default Alarm 6 Trigger
        Default Alarm 7 Enable   108 At7 109  Default Alarm 7 Trigger
        Default Alarm 8 Enable   110 At8 111  Default Alarm 8 Trigger

### Alarm Triggers

TODO

### NetMail Triggers

TODO

### Lightbar `&` Command [[ampersand-lightbar]]

`&,52,_position_,_mode_`

`position` ranges from 0-119 decimal ($00-$78 hexadecimal--`&,52,$30,0`, for example, is allowed). 

`mode` is 0-4 as used by BASIC. Mode 5 is reserved for use by ML routines, and discussed in the accompanying _Image BBS 3.0 Programmer's Reference Guide_.

[options="autowidth"]
|====================
| `0` | clear checkmark at _position_
| `1` | set checkmark at _position_
| `2` | toggle checkmark at _position_
| `3` | read checkmark at _position_, return status in `a%`: 0=off, 1=on 
| `4` | move "`lit`" portion of lightbar to position 0-55 [FIXME: or 1-56?] 
|====================
