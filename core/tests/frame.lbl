{step:2}
{crunch:on}
{alpha:alt}
{:3000}
	rem "i.test frame" efficiency/madness strikes again - pinacolada 2020/01/24
' TODO: &,27,1 at startup / &,28,1 at quit?
	&"{clear}":&,27,1:s$="{space:36}"
{:menu}
'	&"{home}{pound}n7"
	&,70,0,7
	&"0) Quit{f6}1) Draw frame{f6}"
	&"2) Scroll text{f6}3) Flash text, get option{f6:2}"
{:prompt}
	p$="Option":&,1:a%=val(an$):if tr%<1 or a%=. then:&"Quitting.":&,28,1:goto 300
	if a%<1 or a%>3 then:&"Out of range.{f6}":goto {:prompt}
' calculated goto: [save 2 bytes vs. a%=3000+(a%*100)]
	a%=a%*100+3000:&,66
{:3100}
	gosub {:3400}:goto {:menu}
{:3200}
' does not work
'	j=j+1:z1$="Line {pound}!j":j=j+1:z2$="Line {pound}!j":gosub {:3404}:goto {:menu}
' scroll the numbers 1-20 up as a counter:
	for j=1 to 20 step 2
	z3$="Line "+str$(j):gosub {:3404}:&,22,5
	z3$="Line "+str$(j+1):gosub {:3404}:&,22,5
	next:goto {:menu}
{:3300}
' display z1$ and z2$
	z1$="1: Option One":z2$="2: Option Two":gosub {:3408}:goto {:menu}

{:3400}
' 3400 z1$="":z2$="":&"{home}{f6:2} {gray2}{$b0}{$c0:36}{$ae}{f6}"
' &,69 can't do special petscii characters like {$b0}
	z1$="":z2$="":&,70,1,2:&"{gray2}{$b0}"+mid$(ak$,2,36)+"{$ae}"
' 3401 &" {gray2}{$dd}{gray3}{rvrs on}{space:36}{rvrs off}{gray2}{$dd}{f6}"
{:3401}
	for i=3 to 4:&,70,1,i:&"{gray2}{$dd}{gray3}{rvrs on}{pound}$s{rvrs off}{gray2}{$dd}":next
' 3402 &" {gray2}{$dd}{gray3}{rvrs on}                                    {rvrs off}{gray2}{$dd}{f6}"
' 3403 &" {gray2}{$ad}{$c0:36}{$bd}{f6}":return
{:3403}
	&,70,1,5:&"{gray2}{$ad}"+mid$(ak$,2,36)+"{$bd}":return

'	c$="{yellow}{gray3}":return
'	&"{pound}c7{pound}cl"
' scroll z1$ up, display z2$
' add trailing spaces after z2$
' 3404 z1$=z2$:z2$=z3$:fori=1to(34-len(z2$)):z2$=z2$+" ":next

' pass z3$ as new line of info to scroll
' scroll z1$ and z2$ up. z3$ is new line to display
{:3404}
	z1$=z2$:c=$8f:z2$=left$(z3$+s$,34)
' 3406 b$=z1$:&"{home}{f6:3}{right:3}{gray3}{rvrs on}{pound}$b":b$=z2$:&"{f6}{right:3}{gray3}{rvrs on}{pound}$b":&"{f6:2}":return
' display both z2$ and z3$, don't scroll
{:3406}
	&,69,3,3,z1$,c:&,69,3,4,z2$,c:return

' 3408 c$="{yellow}{gray3}":i=i+1:ifi>2theni=1
' $87=rvs yellow, $8f=rvs gray3
' c=current color, ci=color index
' alternate inside of frame between colors
{:3408}
' ' i=not i does not work
	z=z+1:if z=21 then i=1-i:c=$87:if i then c=$8f
' 3409 b$=mid$(c$,i,1)+"{rvrs on} "+z1$:&"{home}{f6:3}{right:2}{pound}$b":b$=mid$(c$,i,1)+"{rvrs on} "+z2$:&"{f6}{right:2}{pound}$b"
' &,69,<column>,<row>,<text>,<color>
' &,69,4,21,left$(" "+cm$+"{space:16}",16),$8c
{:3409}
	if z=21 then z=.:gosub {:3406}

' &,48 - getkbd - replace get an$? may be blocking
' (character-io.asm)
' {:3410} &,48:if kp%=. then:&,22,5:goto {:3408}
{:3410}
	get an$:on -(an$="") goto {:3408}:goto {:3401}
' 3411 if z=20 then z=.:goto 3408
{:3411}
	an=val(an$):if an<1 or an>2 then {:3408}
{:3412}
	&"Selected option {pound}v7.{f6}":return
' ### neat ###
